<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>HTML Copy Panel</title>

<style>
body{
    background:#000;
    font-family:Arial, sans-serif;
    color:#fff;
    text-align:center;
}
h1{
    color:#00ffcc;
    margin-top:20px;
}
.container{
    width:95%;
    margin:auto;
}
input{
    padding:8px;
    margin:10px;
    width:200px;
    border-radius:5px;
    border:none;
}
button{
    padding:6px 12px;
    border:none;
    border-radius:5px;
    cursor:pointer;
}
.share-btn{
    background:#00ffcc;
}
.undo-btn{
    background:#ff4444;
    color:#fff;
}
table{
    width:100%;
    border-collapse:collapse;
    margin-top:10px;
}
th,td{
    border:1px solid #333;
    padding:8px;
    cursor:pointer;
}
th{
    background:#111;
    color:#00ffcc;
}
td.green{
    background:green;
}
.copied-msg{
    margin-top:15px;
    color:#00ff00;
    font-weight:bold;
}
</style>
</head>

<body>

<h1>Copy Panel</h1>

<div class="container">

<input type="number" id="filterInput" placeholder="Filter Serial Number">
<button onclick="applyFilter()">Filter</button>
<button class="share-btn" onclick="generateLink()">Generate Share Link</button>

<table id="dataTable">
<thead>
<tr>
<th>Serial</th>
<th>Username</th>
<th>Password</th>
<th>Undo</th>
</tr>
</thead>
<tbody></tbody>
</table>

<div class="copied-msg" id="copiedMsg"></div>

</div>

<script>

const data = `7215	CN092538038
5367	CN092538077
2947	CN092538502
5665	CN092538561
9524	CN092538596
9459	CN092538601
7485	CN092538668
7816	CN092538677
2236	CN092538683
4153	CN092538966
5084	CN092539476
9901	CN092539600
1219	CN092539862
6960	CN092540157
4144	CN092544287
8054	CN092544390
4398	CN092544459
5351	CN092544483
6718	CN092545073
8796	CN092548722
1009	CN092549190
7263	CN092549398
8990	CN092549901
9319	CN092549960
7659	CN092554375
8319	CN092554665
1239	CN092554683
2918	CN092554991
6209	CN092555070
4094	CN092556403
2172	CN092556674
9497	CN092556810
5412	CN092558233
9201	CN092558602
8389	CN092559455
2423	CN092559490
6406	CN092564021
6669	CN092564028
3162	CN092564030
1138	CN092564141
2288	CN092564217
8187	CN092564222
3679	CN092565415
5443	CN092567804
7234	CN092567840
9848	CN092567967
3343	CN092568488
9016	CN092568528
6385	CN092568551
7421	CN092568565
8102	CN092569397
4560	CN092570157
5445	CN092570923
3096	CN092571531
1899	CN092572710
8791	CN092573016
9510	CN092573202
3098	CN092573239
8018	CN092574166
2435	CN092575329
4608	CN092576513
2356	CN092576942
1192	CN092577674
8246	CN092580054
9761	CN092580594
5850	CN092581921
2248	CN092581960
7272	CN092582374
1766	CN092582832
5529	CN092582834
3578	CN092585481
8763	CN092586843
6004	CN092586867
4684	CN092588018
1083	CN092588886
7537	CN092589045
1883	CN092590723
3722	CN092590918
5796	CN092591316
2809	CN092591609
1182	CN092592099
4927	CN092592119
8169	CN092592273
6997	CN092592924
4082	CN092593067
3399	CN092593257
3700	CN092593513
7073	CN092593530
3922	CN092593896
8836	CN092593972
6012	CN092594045
7007	CN092594579
5186	CN092594582
2947	CN092594587
7378	CN092594588
1175	CN092595500
8768	CN092595732
1667	CN092595742
1133	CN092597229
3963	CN092597347
5208	CN092597590
8862	CN092597682
9334	CN092598054
9203	CN092598129
8035	CN092598160
8759	CN092598827
4672	CN092598930
1699	CN092599008
2426	CN0925101224
5188	CN0925101425
1119	CN0925101451
2811	CN0925103795
8122	CN0925105234
4150	CN0925106643
2353	CN0925106657
5851	CN0925106670
1708	CN0925107691
7790	CN0925108007
2145	CN0925109251
8321	CN0925110834
9056	CN0925111037
3457	CN0925111435
5519	CN0925111487
5425	CN0925111655
3957	CN0925111728
4072	CN0925111734
2929	CN0925112014
1262	CN0925112052
2408	CN0925112068
8312	CN0925112099
7311	CN0925112121
4868	CN0925112220
6215	CN0925112222
4575	CN0925112223
7024	CN0925112389
1168	CN0925112419
1487	CN0925112456
9443	CN0925112696
4974	CN0925112925
5352	CN0925109887
9425	CN0925112953
7157	CN0925112975
4276	CN0925113193
7627	CN0925113688
7651	CN0925115478
7121	CN0925116171
9858	CN0925116783
2062	CN0925117504
3200	CN0925117605
4576	CN0925117689
9333	CN0925118985
9737	CN0925119453
2767	CN0925119854
5256	CN0925119992
5872	CN0925120612
9520	CN0925123202
9721	CN102500497
8902	CN102502204
2764	CN102502475
9611	CN102502608
6495	CN102506185
9112	CN102510282
4220	CN102510382
5742	CN102511978
5823	CN102512530
9579	CN102512872
2204	CN102513855
7469	CN102513975
1281	CN102516648
6746	CN102518917
1263	CN102524870
7747	CN102530742
8978	CN102532186
5558	CN102536513
3638	CN102537187
5797	CN102537302
3187	CN102537363
8652	CN102539057
6325	CN102541235
5527	CN102541363
3132	CN102541486
2607	CN102541567
2613	CN102541591
2954	CN102542792
5815	CN102542800
1372	CN102542817
7974	CN102546729
5862	CN102546962
2624	CN102547003
5769	CN102548564
3132	CN102549353
5133	CN102549631
4685	CN102549702
5505	CN102550043
3609	CN102550434
3133	CN102551437
5391	CN102551549
3137	CN102555701
9007	CN102556337
3341	CN102557016
6092	CN102557531
5389	CN102557683
7457	CN102557700
3948	CN102558923
9014	CN102560454
8942	CN102563519
6988	CN102563637
6415	CN102564331
8528	CN102565220
6626	CN102566954
3110	CN102569718
5769	CN102569766
2242	CN102574255
4889	CN102574600
1017	CN102574751
1962	CN102574758
5317	CN102574773
2051	CN102575350
8269	CN102575352
7296	CN102576805
9503	CN102577737
6520	CN102577893
7819	CN102579603
3524	CN102580104`;

const rows = data.trim().split("\n");
const tbody = document.querySelector("#dataTable tbody");

rows.forEach((row,i)=>{
    const cols = row.split("\t");
    const tr = document.createElement("tr");

    tr.innerHTML = `
        <td>${i+1}</td>
        <td onclick="copyCell(this)">${cols[0]}</td>
        <td onclick="copyCell(this)">${cols[1]}</td>
        <td><button class="undo-btn" onclick="undoRow(this)">Undo</button></td>
    `;
    tbody.appendChild(tr);
});

function copyCell(cell){
    navigator.clipboard.writeText(cell.innerText);
    cell.classList.add("green");
    document.getElementById("copiedMsg").innerText="âœ” Copied";
    updateURL();
}

function undoRow(btn){
    const row = btn.closest("tr");
    row.querySelectorAll("td").forEach(td=>{
        td.classList.remove("green");
    });
    updateURL();
}

function applyFilter(){
    const val = document.getElementById("filterInput").value;
    const trs = tbody.querySelectorAll("tr");
    trs.forEach(tr=>{
        const serial = tr.children[0].innerText;
        tr.style.display = (val==="" || serial===val) ? "" : "none";
    });
}

function updateURL(){
    const greenCells = [];
    document.querySelectorAll("td.green").forEach(td=>{
        const row = td.parentElement.rowIndex;
        const col = td.cellIndex;
        greenCells.push(row+"-"+col);
    });
    const url = window.location.pathname + "?selected=" + greenCells.join(",");
    history.replaceState(null,null,url);
}

window.onload=function(){
    const params = new URLSearchParams(window.location.search);
    if(params.get("selected")){
        const items = params.get("selected").split(",");
        items.forEach(item=>{
            const [r,c]=item.split("-");
            const cell=document.querySelector(`table tr:nth-child(${r}) td:nth-child(${parseInt(c)+1})`);
            if(cell) cell.classList.add("green");
        });
    }
}

function generateLink(){
    updateURL();
    alert("Share this URL from address bar");
}

</script>

</body>
</html>
