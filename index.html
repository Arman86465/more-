<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Copy Panel</title>

<style>
body{
    background:#000;
    font-family:Arial, sans-serif;
    color:#fff;
    text-align:center;
}

h2{
    color:#00e0ff;
    margin-top:20px;
}

input{
    padding:8px;
    width:200px;
    margin:10px;
    border-radius:5px;
    border:none;
}

button{
    padding:6px 10px;
    border:none;
    border-radius:5px;
    cursor:pointer;
}

table{
    margin:auto;
    border-collapse:collapse;
    width:90%;
    max-width:800px;
    background:#111;
}

th,td{
    border:1px solid #333;
    padding:10px;
}

th{
    background:#1a1a1a;
    color:#00e0ff;
}

td{
    cursor:pointer;
}

td.green{
    background:#0f0;
    color:#000;
    font-weight:bold;
}

.undoBtn{
    background:#ff4444;
    color:#fff;
}

#copiedMsg{
    margin-top:15px;
    color:#00ff88;
    font-weight:bold;
}
</style>
</head>

<body>

<h2>HTML Copy Panel</h2>

<input type="number" id="filterInput" placeholder="Filter Serial Number">
<button onclick="filterSerial()">Filter</button>
<button onclick="clearFilter()">Clear</button>

<br><br>

<table id="dataTable">
<thead>
<tr>
<th>Sr No.</th>
<th>Username</th>
<th>Password</th>
<th>Undo</th>
</tr>
</thead>
<tbody></tbody>
</table>

<div id="copiedMsg"></div>

<script>

const data = [
["6868","CN042522736"],
["2075","CN042530835"],
["3948","CN042530839"],
["4579","CN042530842"],
["3199","CN042571798"],
["7343","CN042530846"],
["1064","CN042531031"],
["2470","CN042531032"],
["7492","CN042531034"],
["4122","CN042532797"],
["9901","CN042532827"],
["3313","CN042533836"],
["5944","CN042533867"],
["3443","CN042533875"],
["8775","CN042533890"],
["6181","CN042533906"],
["9472","CN042533914"],
["5604","CN042533924"],
["6798","CN042533957"],
["1414","CN042534979"],
["9490","CN042534984"],
["3034","CN042535160"],
["3598","CN042535162"],
["3866","CN042535164"],
["3447","CN042538637"],
["1130","CN042538675"],
["3487","CN042538697"],
["2892","CN042541393"],
["6349","CN042541395"],
["4824","CN042541398"],
["5863","CN042541399"],
["2955","CN042542374"],
["6287","CN042542460"],
["2220","CN042542518"],
["7463","CN042542531"],
["8897","CN042542550"],
["5216","CN042542575"],
["9828","CN042542614"],
["4561","CN042542627"],
["6870","CN042542635"],
["9964","CN042542646"],
["7655","CN042543110"],
["6337","CN042543113"],
["4553","CN042543118"],
["8015","CN042543130"],
["5610","CN042543134"],
["7939","CN042543137"],
["5049","CN042543584"],
["1911","CN042543674"],
["5416","CN042543890"],
["5637","CN042546009"],
["3311","CN042546011"],
["3226","CN042546014"],
["2851","CN042546588"],
["7996","CN042546594"],
["4279","CN042547220"],
["2398","CN042547239"],
["7388","CN042547246"],
["2211","CN042547256"],
["5810","CN042547295"],
["4412","CN042547617"],
["8063","CN042547635"],
["4652","CN042547642"],
["3423","CN042547658"],
["2546","CN042547668"],
["6578","CN042547695"],
["4796","CN042551671"],
["2516","CN042551778"],
["6308","CN042551786"],
["3796","CN042551787"],
["2359","CN042551788"],
["9157","CN042551789"],
["8401","CN042551790"],
["8467","CN042551795"],
["1124","CN042551956"],
["1239","CN042552457"],
["4078","CN042554714"]
];

const tbody = document.querySelector("#dataTable tbody");
let greenCells = new Set();

function renderTable(){
tbody.innerHTML="";
data.forEach((row,index)=>{
let tr=document.createElement("tr");

tr.innerHTML=`
<td>${index+1}</td>
<td onclick="copyCell(this,${index},0)">${row[0]}</td>
<td onclick="copyCell(this,${index},1)">${row[1]}</td>
<td><button class="undoBtn" onclick="undoRow(${index})">Undo</button></td>
`;
tbody.appendChild(tr);
});
restoreGreenFromURL();
}
renderTable();

function copyCell(cell,row,col){
navigator.clipboard.writeText(cell.innerText);
cell.classList.add("green");
greenCells.add(row+"-"+col);
updateURL();
document.getElementById("copiedMsg").innerText="âœ” Copied";
setTimeout(()=>{document.getElementById("copiedMsg").innerText="";},1000);
}

function undoRow(row){
greenCells.forEach(val=>{
if(val.startsWith(row+"-")){
greenCells.delete(val);
}
});
updateURL();
renderTable();
}

function updateURL(){
let params=[...greenCells].join(",");
history.replaceState(null,"","?green="+params);
}

function restoreGreenFromURL(){
const params=new URLSearchParams(window.location.search);
const green=params.get("green");
if(green){
green.split(",").forEach(val=>{
let [r,c]=val.split("-");
let row=tbody.rows[r];
if(row){
row.cells[parseInt(c)+1].classList.add("green");
greenCells.add(val);
}
});
}
}

function filterSerial(){
let value=document.getElementById("filterInput").value;
[...tbody.rows].forEach(row=>{
row.style.display=(row.cells[0].innerText===value)?"":"none";
});
}

function clearFilter(){
document.getElementById("filterInput").value="";
[...tbody.rows].forEach(row=>row.style.display="");
}

</script>

</body>
</html>
