<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Copy Panel</title>

<style>
body{
    background:#000;
    font-family:Arial, sans-serif;
    color:#fff;
    padding:20px;
}

h2{
    text-align:center;
    color:#00ffcc;
}

input{
    padding:6px;
    margin-bottom:10px;
    width:100px;
}

table{
    width:100%;
    border-collapse:collapse;
    background:#111;
}

th,td{
    border:1px solid #333;
    padding:8px;
    text-align:center;
    cursor:pointer;
}

th{
    background:#222;
    color:#00ffcc;
}

td.copied{
    background:green;
    color:#fff;
}

button{
    padding:4px 8px;
    cursor:pointer;
}

#msg{
    margin-top:10px;
    color:#00ff00;
    font-weight:bold;
}
</style>
</head>
<body>

<h2>Copy Panel</h2>

<label>Filter Serial No:</label>
<input type="number" id="filter" onkeyup="filterTable()">

<table id="dataTable">
<thead>
<tr>
<th>Sr.No</th>
<th>Username</th>
<th>Password</th>
<th>Undo</th>
</tr>
</thead>
<tbody>
</tbody>
</table>

<div id="msg"></div>

<script>

const data = `7667	CN042562095
2246	CN042562099
1464	CN042562102
6434	CN042562105
7111	CN042562106
8630	CN042562121
7195	CN042562122
5663	CN042562220
9696	CN042562229
4287	CN042562235
1134	CN042562239
2529	CN042562240
8126	CN042562249
1030	CN042562294
8557	CN042562329
9341	CN042564812
8382	CN042565059
6476	CN042565080
1570	CN042565110
3005	CN042565212
3561	CN042565262
8262	CN042565918
4167	CN042565921
5579	CN042565923
4251	CN042565926
8190	CN042565927
5024	CN042565933
5563	CN042565934
3617	CN042567567
6384	CN042567591
7321	CN042567610
3097	CN042567620
5837	CN042567641
9735	CN042567690
6764	CN042567713
7371	CN042567749
5871	CN042567758
5944	CN042567795
7285	CN042567816
4677	CN042567855
7168	CN042567873
8855	CN042567937
9229	CN042568453
2536	CN042530844
8766	CN042569033
5253	CN042569073
9625	CN042569112
3246	CN042569149
8897	CN042569168
2403	CN042571779
6420	CN042571791
9544	CN042571794
5210	CN042560798
6370	CN042572472
4912	CN042572520
5957	CN042572626
4824	CN042572642
7921	CN042572666
4707	CN042572717
3395	CN042578578
7353	CN042578589
6073	CN042578600
3068	CN042578610
3492	CN042578668
3164	CN042579091
7189	CN042580630
9461	CN042581589
9320	CN042581611
1589	CN042584674
7348	CN042584680
6974	CN042584687
4289	CN042584690
7307	CN042587421
2887	CN042587428
1397	CN042587430
4935	CN082535981
2151	CN082536156
4786	CN082536161
5696	CN082536163
3150	CN082536186
7987	CN082536465
6131	CN082536590
2739	CN082536598
5294	CN082536614
8493	CN082536635
3821	CN082536649
7055	CN082536664
4039	CN082536685
4430	CN082536698
6303	CN082536710
3890	CN082539813
1814	CN082539816
9556	CN082539819
2188	CN082542490
6001	CN082544946
6228	CN082545893
5844	CN082546567
5628	CN082547280
3896	CN082547300
9068	CN082547301`;

const tbody = document.querySelector("#dataTable tbody");
let greenCells = new Set();

function loadTable(){
    const rows = data.trim().split("\n");
    rows.forEach((row,index)=>{
        const [user,pass] = row.split("\t");

        const tr = document.createElement("tr");

        tr.innerHTML = `
            <td>${index+1}</td>
            <td onclick="copyCell(this,${index},'u')">${user}</td>
            <td onclick="copyCell(this,${index},'p')">${pass}</td>
            <td><button onclick="undoRow(${index})">Undo</button></td>
        `;
        tbody.appendChild(tr);
    });
    loadFromURL();
}

function copyCell(cell,row,type){
    navigator.clipboard.writeText(cell.innerText);
    cell.classList.add("copied");
    greenCells.add(row+"-"+type);
    document.getElementById("msg").innerText="âœ” Copied";
    updateURL();
}

function undoRow(row){
    const tr = tbody.rows[row];
    tr.cells[1].classList.remove("copied");
    tr.cells[2].classList.remove("copied");
    greenCells.delete(row+"-u");
    greenCells.delete(row+"-p");
    updateURL();
}

function filterTable(){
    const value = document.getElementById("filter").value;
    Array.from(tbody.rows).forEach(row=>{
        if(value==="" || row.cells[0].innerText===value){
            row.style.display="";
        } else {
            row.style.display="none";
        }
    });
}

function updateURL(){
    const params = new URLSearchParams();
    params.set("green",Array.from(greenCells).join(","));
    history.replaceState(null,"","?"+params.toString());
}

function loadFromURL(){
    const params = new URLSearchParams(window.location.search);
    if(params.has("green")){
        const items = params.get("green").split(",");
        items.forEach(item=>{
            greenCells.add(item);
            const [row,type] = item.split("-");
            const tr = tbody.rows[row];
            if(tr){
                if(type==="u") tr.cells[1].classList.add("copied");
                if(type==="p") tr.cells[2].classList.add("copied");
            }
        });
    }
}

loadTable();

</script>

</body>
</html>
