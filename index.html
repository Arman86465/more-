<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>HTML Copy Panel</title>

<style>
body{
    background:black;
    font-family:Arial, sans-serif;
    color:white;
    text-align:center;
}

h2{
    color:#00ffff;
}

table{
    margin:auto;
    border-collapse:collapse;
    width:90%;
}

th, td{
    border:1px solid #555;
    padding:8px;
    cursor:pointer;
}

th{
    background:#111;
    color:#00ffff;
}

td{
    background:#1a1a1a;
}

td.green{
    background:green !important;
    color:white;
}

button{
    padding:5px 10px;
    background:#00ffff;
    border:none;
    cursor:pointer;
    font-weight:bold;
}

button:hover{
    opacity:0.8;
}

#copiedMsg{
    margin-top:15px;
    color:lime;
    font-weight:bold;
}

input{
    padding:5px;
    margin:10px;
    width:100px;
    text-align:center;
}
</style>
</head>

<body>

<h2>Copy Panel</h2>

Filter Serial No:
<input type="number" id="filterInput" placeholder="Enter No">

<button onclick="shareLink()">Share Link</button>

<table id="dataTable">
<thead>
<tr>
<th>Sr No</th>
<th>Username</th>
<th>Password</th>
<th>Undo</th>
</tr>
</thead>
<tbody></tbody>
</table>

<div id="copiedMsg"></div>

<script>

const data = [
["1479","CN042587432"],
["3032","CN042587456"],
["2021","CN042587457"],
["5065","CN052505774"],
["1248","CN042587461"],
["6350","CN052500001"],
["2774","CN052500002"],
["3441","CN052500005"],
["5197","CN052500008"],
["1479","CN052500009"],
["5570","CN052500011"],
["4759","CN052571827"],
["4590","CN052500014"],
["1171","CN052500320"],
["7626","CN052501532"],
["8095","CN052505261"],
["9783","CN052505278"],
["9935","CN052505282"],
["1450","CN052505298"],
["4789","CN052505747"],
["8535","CN062511820"],
["9617","CN052505827"],
["3741","CN052506013"],
["6494","CN052509237"],
["3376","CN052509253"],
["5976","CN052509268"],
["5860","CN052509331"],
["6507","CN052512941"],
["1404","CN052512948"],
["9695","CN052512955"],
["7795","CN052514689"],
["9853","CN052525243"],
["9796","CN052525566"],
["3303","CN082547303"],
["5844","CN082547308"],
["1914","CN082547319"],
["6021","CN082547321"],
["8333","CN082548146"],
["7117","CN082548378"],
["8036","CN082548817"],
["7630","CN082548827"],
["5448","CN082552327"],
["7898","CN082552521"],
["8121","CN082556055"],
["1090","CN082556285"],
["2986","CN082556527"],
["9591","CN082556545"],
["6753","CN082556722"],
["3729","CN082556827"],
["9752","CN082556840"],
["6569","CN082556841"],
["2552","CN082556854"],
["5226","CN082556868"],
["7397","CN082556875"],
["2052","CN082556877"],
["6803","CN082556878"],
["5360","CN082556880"],
["6833","CN082556898"],
["9591","CN082557264"],
["6126","CN082559956"],
["4697","CN082559999"],
["9003","CN082565634"],
["1338","CN082565662"],
["9985","CN082567776"],
["5552","CN082567787"]
];

const tbody = document.querySelector("#dataTable tbody");
const copiedMsg = document.getElementById("copiedMsg");

function renderTable() {
    tbody.innerHTML="";
    data.forEach((row,index)=>{
        const tr=document.createElement("tr");

        tr.innerHTML=`
        <td>${index+1}</td>
        <td onclick="copyCell(this,'u${index}')">${row[0]}</td>
        <td onclick="copyCell(this,'p${index}')">${row[1]}</td>
        <td><button onclick="undoRow(${index})">Undo</button></td>
        `;

        tbody.appendChild(tr);
    });
}

function copyCell(cell,id){
    navigator.clipboard.writeText(cell.innerText);
    cell.classList.add("green");
    copiedMsg.innerText="✔ Copied";

    let params=new URLSearchParams(window.location.search);
    params.set(id,"1");
    history.replaceState(null,"","?"+params.toString());
}

function undoRow(index){
    const row=tbody.rows[index];
    row.cells[1].classList.remove("green");
    row.cells[2].classList.remove("green");

    let params=new URLSearchParams(window.location.search);
    params.delete("u"+index);
    params.delete("p"+index);
    history.replaceState(null,"","?"+params.toString());
}

function applyGreenFromURL(){
    let params=new URLSearchParams(window.location.search);
    data.forEach((row,index)=>{
        if(params.get("u"+index)){
            tbody.rows[index].cells[1].classList.add("green");
        }
        if(params.get("p"+index)){
            tbody.rows[index].cells[2].classList.add("green");
        }
    });
}

document.getElementById("filterInput").addEventListener("input",function(){
    let val=this.value;
    Array.from(tbody.rows).forEach(row=>{
        row.style.display = (!val || row.cells[0].innerText===val) ? "" : "none";
    });
});

function shareLink(){
    navigator.clipboard.writeText(window.location.href);
    copiedMsg.innerText="✔ Link Copied";
}

renderTable();
applyGreenFromURL();

</script>

</body>
</html>
